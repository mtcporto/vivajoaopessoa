<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Anime da Temporada</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        .header {
            background-color: black;
            color: white;
            padding: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        .card-container {
            margin: 20px;
        }
        .card {
            margin-bottom: 10px;
        }
        .card-img-top {
            width: 100%;
            height: auto;
            object-fit: cover;
        }
        @media (max-width: 576px) {
            .card {
                flex: 0 0 100%;
                max-width: 100%;
            }
            .card-img-top {
                height: 975px;
            }
        }
    </style>
</head>
<body>
    <div id="header" class="header">
        <h1 id="header-title"></h1>
    </div>
    <div id="card-container" class="row card-container"></div>

    <script>
        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        let season;
        if (month < 3) {
            season = 'WINTER';
        } else if (month < 6) {
            season = 'SPRING';
        } else if (month < 9) {
            season = 'SUMMER';
        } else {
            season = 'FALL';
        }

        document.getElementById('header-title').textContent = 'Temporada ' + season + ' ' + year;

        const query = `
            query {
                Page(page: 1, perPage: 50) {
                    media(season: ${season}, seasonYear: ${year}, format: TV) {
                        title {
                            romaji
                            english
                            native
                        }
                        coverImage {
                            large
                        }
                    }
                }
            }
        `;

        fetch('https://graphql.anilist.co', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ query: query }),
        })
        .then(response => response.json())
        .then(result => {
            let cardContainer = document.getElementById('card-container');

            for (let anime of result.data.Page.media) {
                let card = document.createElement('div');
                card.className = 'card col-sm-12 col-lg-2';

                let img = document.createElement('img');
                img.className = 'card-img-top';
                img.src = anime.coverImage.large;

                let cardBody = document.createElement('div');
                cardBody.className = 'card-body';

                let title = document.createElement('h5');
                title.className = 'card-title';
                title.textContent = anime.title.english || anime.title.romaji;

                cardBody.appendChild(title);
                card.appendChild(img);
                card.appendChild(cardBody);
                cardContainer.appendChild(card);
            }
        });
    </script>
</body>
</html>
