<!DOCTYPE html>
<html>
  <head>
    <title>WebRTC Exemplo</title>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<style>
  .container {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.video-container {
  position: relative;
}

#localVideo {
  border-radius: 10px;
}

.controls {
  position: absolute !important;
  bottom: 10px !important;
  right: 10px !important;
}


.controls i {
  color: white;
  font-size: 24px;
  margin-left: 10px;
}

.controls i.fa-video,
.controls i.fa-microphone {
  border-radius: 50%;
  padding: 5px;
  width: 40px;
  height: 40px;
  line-height: 30px;
  text-align: center;
}

.controls i.fa-microphone.on,
.controls i.fa-video.on {
  background-color: green;
}

.controls i.fa-microphone.off,
.controls i.fa-video.off {
  background-color: red;
}

.user-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  color: white;
  font-size: 50px;
}


</style>
  </head>
    <div class="container">
<div class="video-container">
<video id="localVideo" autoplay muted></video>

<i class="fas fa-user user-icon"></i>
        <div class="controls">
  <body>          <i id="audioToggle" class="fa fa-microphone"></i>
          <i id="videoToggle" class="fas fa-video"></i>
          <i id="settings" class="fa fa-cog"></i>
          <i id="fullscreen" class="fas fa-expand"></i>
        </div>
      </div>
    </div>

    <script>
const localVideo = document.querySelector('#localVideo');
const fullscreenButton = document.querySelector('#fullscreen');
const settingsButton = document.querySelector('#settings');
const audioToggleButton = document.querySelector('#audioToggle');
const videoToggleButton = document.querySelector('#videoToggle');

let localStream;

navigator.mediaDevices.getUserMedia({ audio: true, video: true })
.then(stream => {
  localStream = stream;
  localVideo.srcObject = stream;

  audioToggleButton.classList.add('on');
  videoToggleButton.classList.add('off');
  
  localStream.getVideoTracks()[0].enabled = false;
  
  userIcon.style.display = 'block';
})
.catch(error => {
  console.error(error);
});   

fullscreenButton.addEventListener('click', () => {
  if (document.fullscreenElement) {
    document.exitFullscreen();
  } else {
    localVideo.requestFullscreen();
  }
});


settingsButton.addEventListener('click', () => {
// Open settings popup here
});

audioToggleButton.addEventListener('click', () => {
if (localStream.getAudioTracks()[0].enabled) {
    localStream.getAudioTracks()[0].enabled = false;
    audioToggleButton.classList.remove('on');
    audioToggleButton.classList.add('off');
} else {
    localStream.getAudioTracks()[0].enabled = true;
    audioToggleButton.classList.remove('off');
    audioToggleButton.classList.add('on');
}
});

const userIcon = document.querySelector('.user-icon');


videoToggleButton.addEventListener('click', () => {
if (localStream.getVideoTracks()[0].enabled) {
    localStream.getVideoTracks()[0].enabled = false;
    videoToggleButton.classList.remove('on');
    videoToggleButton.classList.add('off');
    userIcon.style.display = 'block';
} else {
    localStream.getVideoTracks()[0].enabled = true;
    videoToggleButton.classList.remove('off');
    videoToggleButton.classList.add('on');
    userIcon.style.display = 'none';
}
});

settingsButton.addEventListener('click', () => {
  window.open('config.html', 'config', 'width=500,height=500');
});

    </script>
    <script>
// Lê o nome da sala a partir da URL
const urlParams = new URLSearchParams(window.location.search);
const roomName = urlParams.get('room');

// Conecta-se à sala de WebRTC usando o nome da sala
connectToRoom(roomName);

function connectToRoom(roomName) {
  // Implemente aqui o código para conectar-se à sala de WebRTC usando o nome da sala
  // ...
}

    </script>
  </body>
</html>
