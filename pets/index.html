<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viva João Pessoa - RSS Feed</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const rssFeedUrl = "https://cors.mosaicoworkers.workers.dev/vivajoaopessoa.wordpress.com/feed/";
            
            fetch(rssFeedUrl)
                .then(response => response.text())
                .then(data => {
                    const parser = new DOMParser();
                    const xml = parser.parseFromString(data, "text/xml");
                    const items = xml.querySelectorAll("item");

                    const feedContainer = document.getElementById("feed-container");
                    feedContainer.innerHTML = "";

                    items.forEach(item => {
                        const title = item.querySelector("title").textContent;
                        const link = item.querySelector("link").textContent;
                        const pubDate = new Date(item.querySelector("pubDate").textContent).toLocaleDateString("pt-BR");
                        const description = item.querySelector("description").textContent;
                        const mediaContent = item.querySelector("media\\:content");

                        let image = "";
                        if (mediaContent) {
                            image = mediaContent.getAttribute("url");
                        } else {
                            // Imagem padrão caso não exista imagem no feed
                            image = "https://via.placeholder.com/150";
                        }

                        const card = document.createElement("div");
                        card.className = "card mb-3";

                        if (image) {
                            const cardImage = document.createElement("img");
                            cardImage.src = image;
                            cardImage.className = "card-img-top";
                            card.appendChild(cardImage);
                        }

                        const cardBody = document.createElement("div");
                        cardBody.className = "card-body";

                        const cardTitle = document.createElement("h5");
                        cardTitle.className = "card-title";
                        cardTitle.textContent = title;

                        const cardText = document.createElement("p");
                        cardText.className = "card-text";
                        cardText.textContent = description;

                        const cardDate = document.createElement("p");
                        cardDate.className = "card-text";
                        const small = document.createElement("small");
                        small.className = "text-muted";
                        small.textContent = `Publicado em ${pubDate}`;
                        cardDate.appendChild(small);

                        const cardLink = document.createElement("a");
                        cardLink.href = link;
                        cardLink.className = "btn btn-primary";
                        cardLink.textContent = "Leia mais";

                        cardBody.appendChild(cardTitle);
                        cardBody.appendChild(cardText);
                        cardBody.appendChild(cardDate);
                        cardBody.appendChild(cardLink);

                        card.appendChild(cardBody);
                        feedContainer.appendChild(card);
                    });
                })
                .catch(error => console.error('Erro ao buscar o RSS feed:', error));
        });
    </script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">Viva João Pessoa - Últimas Notícias</h1>
        <div id="feed-container"></div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
